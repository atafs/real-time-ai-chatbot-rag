# Real-Time AI Chatbot Architecture Diagram

This document contains the Mermaid code for the architecture diagram of the Real-Time AI Chatbot with Retrieval-Augmented Generation (RAG). The diagram is designed to render correctly in GitHub's Markdown preview, following the guidelines at https://docs.github.com/get-started/writing-on-github/working-with-advanced-formatting/creating-diagrams#creating-mermaid-diagrams.

## Mermaid Diagram

```mermaid
graph TD
    %% Define components
    A[User] --> B[Frontend: React UI, SocketIO-client]
    subgraph Frontend
        B --> C[Backend]
    end
    subgraph Backend
        C[NodeJS-Express-SocketIO] --> D[PDF-Processor]
    end
    subgraph External-Services
        E[Pinecone: Vector-DB]
        F[HuggingFace: Embeddings-API]
        G[xAI-Grok: LLM-API]
    end

    %% Define interactions
    A --> B -- HTTP-POST-SocketIO --
    B --> C -- HTTP-SocketIO --
    C --> D -- Extract-Text --
    C --> F -- Generate-Embeddings --
    C --> E -- Upsert-Query-Embeddings --
    C --> G -- Generate-Response --

    %% Styling
    classDef default fill:#f9f9f9,stroke:#333,stroke-width:1px
    classDef external fill:#e6f3ff,stroke:#0066cc,stroke-width:1px
    class E,F,G external
```

## Rendering Instructions

- **GitHub**: Save this file as `architecture_diagram_mermaid_fixed.md` and push it to a GitHub repository. GitHub will render the Mermaid diagram in the Markdown preview.
- **Local Testing**: Use a Mermaid-compatible editor (e.g., VS Code with the Mermaid Preview extension) or an online Mermaid editor like [mermaid.live](https://mermaid.live) to view the diagram.
- **Notes**:
  - The diagram uses a top-down (`TD`) layout for clarity.
  - Edge labels use the `-- text --` syntax with hyphenated, concise terms (e.g., `HTTP-POST-SocketIO`) to avoid spaces, periods, or other problematic characters, ensuring compatibility with GitHub's Mermaid parser (~8.6.0).
  - Node and subgraph labels use hyphens instead of spaces or periods (e.g., `NodeJS-Express-SocketIO`, `External-Services`) to prevent parsing issues.
  - Subgraphs group components logically, and external services are styled differently for distinction.

## Changes Made

- Modified the problematic line from `A --> B -- "HTTP POST upload SocketIO chat" --` to `A --> B -- HTTP-POST-SocketIO --`, removing quotes, spaces, and periods, and using hyphens for a parser-friendly label.
- Simplified other labels similarly:
  - `B --> C -- HTTP-SocketIO --`
  - `C --> D -- Extract-Text --`
  - `C --> F -- Generate-Embeddings --`
  - `C --> E -- Upsert-Query-Embeddings --`
  - `C --> G -- Generate-Response --`
- Updated node and subgraph names to use hyphens instead of spaces or periods for consistency and parser compatibility:
  - `Node.js/Express, Socket.IO` → `NodeJS-Express-SocketIO`
  - `PDF Processor` → `PDF-Processor`
  - `External Services` → `External-Services`
  - `Socket.IO-client` → `SocketIO-client`
  - `Vector DB` → `Vector-DB`
  - `Embeddings API` → `Embeddings-API`
  - `LLM API` → `LLM-API`
- Kept all components, interactions, and styling unchanged to preserve the diagram’s structure.

## Why the Error Occurred

GitHub’s Mermaid parser, based on an older version (~8.6.0 as of June 6, 2025), is sensitive to complex edge labels, particularly those with spaces, periods (e.g., in `SocketIO`), or quotes, which may not be fully supported in the `graph` diagram’s `-- text --` syntax. The error (`Lexical error ... Unrecognized text`) indicates the parser failed to process the label, likely due to its hyphenated structure or residual complexity. Simplifying labels to short, hyphenated terms without spaces or special characters aligns with the GitHub documentation’s examples for flowcharts and ensures compatibility.

## Verification

To confirm the diagram renders correctly:

1. Copy the Mermaid code into [mermaid.live](https://mermaid.live) to preview it.
2. Push the Markdown file to a GitHub repository and check the rendered preview.
3. If using VS Code, install the Mermaid Preview extension to test locally.

If you still encounter rendering issues or prefer a different approach (e.g., even shorter labels, splitting interactions into multiple edges, or reverting to PlantUML), let me know, and I can further refine the diagram!
